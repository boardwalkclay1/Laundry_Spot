<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Account Info â€“ Laundry Bubbles</title>
</head>
<body>
    <h1>Account Info</h1>

    <label>Name</label>
    <input id="name">

    <label>Email</label>
    <input id="email" disabled>

    <label>Phone</label>
    <input id="phone">

    <button onclick="saveAccountInfo()">Save</button>
    <br><br>
    <a href="settings.html">Back</a>

    <script type="module">
        import { supabase } from "./supabase.js";

        const { data: { session } } = await supabase.auth.getSession();
        if (!session) window.location.href = "login.html";

        const { data: profile } = await supabase
            .from("profiles")
            .select("*")
            .eq("id", session.user.id)
            .single();

        document.getElementById("name").value = profile.name || "";
        document.getElementById("email").value = profile.email || "";
        document.getElementById("phone").value = profile.phone || "";

        window.saveAccountInfo = async function () {
            await supabase
                .from("profiles")
                .update({
                    name: document.getElementById("name").value,
                    phone: document.getElementById("phone").value
                })
                .eq("id", session.user.id);

            alert("Saved!");
        }
    </script>
</body>
</html>
