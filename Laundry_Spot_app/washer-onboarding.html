<!DOCTYPE html>
<html>
<head>
  <title>Washer Onboarding</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
  <h2>Washer Onboarding</h2>

  <input id="email" placeholder="Your Email">

  <button onclick="startOnboarding()">Start Stripe Onboarding</button>

  <p id="status" style="margin-top:20px;"></p>
</div>

<script>
async function startOnboarding() {
  const email = document.getElementById('email').value;

  const accountRes = await fetch('/api/washer/create-account', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ email })
  });

  const { accountId } = await accountRes.json();

  const linkRes = await fetch('/api/washer/create-account-link', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ accountId })
  });

  const { url } = await linkRes.json();
  window.location.href = url;
}
</script>

</body>
</html>
